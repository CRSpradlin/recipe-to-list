<html>

<head>
  <link href="/static/styles.css?v=<?php echo time(); ?>" rel="stylesheet" />
  <script src="https://unpkg.com/hyperscript.org@0.9.14"></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
</head>

<body class="bg-amber-400 text-amber-950 ">
  <div class="text-4xl p-2">Brittany's Recipes</div>
  <div class="flex flex-col">
    {{ block "recipe-list" . }}
      {{ range .Recipes }}
        <div>{{ .Name }}</div>
      {{ end }}
    {{ end }}
  </div>

  <div class="mt-20">
    <label>Add A New Recipe</label>
    <form class="flex flex-col">
      <div class="flex flex-col">
        <label>Recipe Name</label>
        <input class="mr-auto p-3 border-2 border-amber-950 rounded-xl" name="name" type="text" placeholder="Chris' Favorite Meal" />  
      </div>
      
      <label>Recipe Ingredients</label>
      <div id="new-recipe-ingredient-list"></div>
      <div>
        <span class="flex flex-row">
          <input id="add-ingredient-input" class="p-3 border-2 border-amber-950 rounded-xl" type="text" placeholder="Rice"/>
          <button
            class="ml-2 bg-amber-950 text-amber-100 p-3 rounded-xl mr-auto"
            type="button"
            _="on click
              if #add-ingredient-input.value is '' break end
              get #new-recipe-ingredient-list-value.value
              if it is ''
                append `${#add-ingredient-input.value}`
              else 
                append `|${#add-ingredient-input.value}`
              end
              put it into #new-recipe-ingredient-list-value.value
              append `<div>${#add-ingredient-input.value}</div>` to #new-recipe-ingredient-list
              set #add-ingredient-input.value to ''"
          >^</button>
        </span>
      </div>
      <input name="ingredients" id="new-recipe-ingredient-list-value" class="hidden" type="text" />
      
      <button class="bg-amber-950 text-amber-100 p-3 rounded-xl mr-auto" type="submit">Submit</button>
    </form>  
  </div>
</body>

</html>
